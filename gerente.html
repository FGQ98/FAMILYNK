<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAMILYNK â€” Gerente</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --sage: #7A9E7E;
      --sage-light: #9BB89E;
      --sage-dark: #5C7D5F;
      --sage-muted: rgba(122, 158, 126, 0.15);
      --cream: #FDF8F3;
      --cream-dark: #F5EDE4;
      --cream-medium: #FAF5EF;
      --terracotta: #C17757;
      --terracotta-muted: rgba(193, 119, 87, 0.15);
      /* Gerente: Azul petrÃ³leo */
      --gerente: #2D4A5C;
      --gerente-light: #4A6B7C;
      --gerente-dark: #1D3544;
      --gerente-muted: rgba(45, 74, 92, 0.15);
      --text: #3D3D3D;
      --text-light: #6B6B6B;
      --text-muted: #9A9A9A;
      --white: #FFFFFF;
      --success: #7DB59A;
      --warning: #E8B44D;
      --warning-muted: rgba(232, 180, 77, 0.15);
      --error: #D4695A;
      --error-muted: rgba(212, 105, 90, 0.15);
      --gold: #B8965C;
      --gold-muted: rgba(184, 150, 92, 0.15);
      --shadow-soft: 0 2px 8px rgba(0,0,0,0.06);
      --shadow-medium: 0 4px 16px rgba(0,0,0,0.08);
      --shadow-float: 0 8px 30px rgba(0,0,0,0.12);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 50px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Nunito', sans-serif;
      background: var(--cream);
      color: var(--text);
      min-height: 100vh;
    }

    /* ========== HEADER ========== */
    .header {
      background: linear-gradient(135deg, var(--gerente) 0%, var(--gerente-dark) 100%);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: var(--shadow-medium);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left { display: flex; align-items: center; gap: 16px; }

    .back-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: rgba(255,255,255,0.15);
      border: none;
      border-radius: var(--radius-md);
      font-family: 'Nunito', sans-serif;
      font-size: 0.85rem;
      color: white;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
    }

    .back-btn:hover { background: rgba(255,255,255,0.25); }

    .header-title {
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;
    }

    .header-icon {
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.2);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
    }

    .header-info h1 {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
    }

    .header-info p {
      font-size: 0.8rem;
      opacity: 0.85;
    }

    .header-badge {
      padding: 4px 12px;
      background: var(--gold);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      color: white;
    }

    /* ========== LAYOUT ========== */
    .layout {
      display: grid;
      grid-template-columns: 240px 1fr;
      min-height: calc(100vh - 72px);
    }

    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
      .sidebar { display: none; }
      .sidebar.mobile-open { display: block; position: fixed; top: 72px; left: 0; right: 0; bottom: 0; z-index: 99; }
    }

    /* ========== SIDEBAR ========== */
    .sidebar {
      background: var(--white);
      border-right: 1px solid var(--cream-dark);
      padding: 20px 0;
      overflow-y: auto;
    }

    .sidebar-section {
      margin-bottom: 24px;
    }

    .sidebar-title {
      padding: 0 20px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      font-weight: 700;
      margin-bottom: 8px;
    }

    .sidebar-nav { list-style: none; }

    .sidebar-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      color: var(--text-light);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.2s;
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
    }

    .sidebar-link:hover { background: var(--cream); color: var(--text); }

    .sidebar-link.active {
      background: var(--gerente-muted);
      color: var(--gerente);
      border-right: 3px solid var(--gerente);
    }

    .sidebar-link-icon { font-size: 1.1rem; width: 24px; text-align: center; }

    .sidebar-link-badge {
      margin-left: auto;
      padding: 2px 8px;
      background: var(--error);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.7rem;
      font-weight: 700;
    }

    .sidebar-link-badge.gold {
      background: var(--gold);
    }

    /* ========== MAIN CONTENT ========== */
    .main {
      padding: 24px;
      max-width: 1200px;
    }

    .section { display: none; }
    .section.active { display: block; }

    .section-header {
      margin-bottom: 24px;
    }

    .section-title {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .section-description {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* ========== CARDS ========== */
    .card {
      background: var(--white);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      margin-bottom: 20px;
    }

    .card-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--cream-dark);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-title {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-body { padding: 20px; }

    /* ========== STATS GRID ========== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow-soft);
    }

    .stat-card.highlight {
      background: linear-gradient(135deg, var(--gerente) 0%, var(--gerente-dark) 100%);
      color: white;
    }

    .stat-card.gold {
      background: linear-gradient(135deg, var(--gold) 0%, #96783F 100%);
      color: white;
    }

    .stat-icon {
      font-size: 1.5rem;
      margin-bottom: 8px;
    }

    .stat-value {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    /* ========== BUTTONS ========== */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      border-radius: var(--radius-md);
      font-family: 'Nunito', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      text-decoration: none;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--sage) 0%, var(--sage-dark) 100%);
      color: white;
    }

    .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-float); }

    .btn-gerente {
      background: linear-gradient(135deg, var(--gerente) 0%, var(--gerente-dark) 100%);
      color: white;
    }

    .btn-gerente:hover { transform: translateY(-2px); box-shadow: var(--shadow-float); }

    .btn-gold {
      background: linear-gradient(135deg, var(--gold) 0%, #96783F 100%);
      color: white;
    }

    .btn-gold:hover { transform: translateY(-2px); box-shadow: var(--shadow-float); }

    .btn-secondary {
      background: var(--cream);
      color: var(--text);
      border: 1px solid var(--cream-dark);
    }

    .btn-secondary:hover { background: var(--cream-dark); }

    .btn-success { background: var(--success); color: white; }
    .btn-warning { background: var(--warning); color: white; }
    .btn-danger { background: var(--error); color: white; }
    .btn-sm { padding: 8px 14px; font-size: 0.8rem; }

    /* ========== TABLES ========== */
    .table-container {
      overflow-x: auto;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
    }

    .data-table th,
    .data-table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--cream-dark);
    }

    .data-table th {
      background: var(--cream);
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--text-light);
    }

    .data-table tr:hover {
      background: var(--cream-medium);
    }

    .data-table .estado {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
    }

    .estado.confirmada { background: var(--sage-muted); color: var(--sage-dark); }
    .estado.pendiente { background: var(--warning-muted); color: var(--warning); }
    .estado.cancelada { background: var(--error-muted); color: var(--error); }
    .estado.nido { background: var(--gold-muted); color: var(--gold); }

    /* ========== HABITACIONES GRID ========== */
    .habitaciones-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    .habitacion-card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow-soft);
      border: 2px solid transparent;
      transition: all 0.2s;
    }

    .habitacion-card:hover {
      box-shadow: var(--shadow-medium);
      border-color: var(--gerente-light);
    }

    .habitacion-card.ocupada {
      border-color: var(--error);
      background: var(--error-muted);
    }

    .habitacion-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .habitacion-numero {
      width: 40px;
      height: 40px;
      background: var(--gerente);
      color: white;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .habitacion-info { flex: 1; margin-left: 12px; }
    .habitacion-nombre { font-weight: 700; font-size: 1rem; }
    .habitacion-config { font-size: 0.8rem; color: var(--text-muted); }

    .habitacion-detalles {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0;
    }

    .habitacion-tag {
      padding: 4px 10px;
      background: var(--cream);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .habitacion-servicios {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      padding-top: 12px;
      border-top: 1px dashed var(--cream-dark);
    }

    .servicio-icon {
      width: 28px;
      height: 28px;
      background: var(--cream);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
    }

    .servicio-icon.activo {
      background: var(--gerente-muted);
    }

    /* ========== HUÃ‰SPEDES ========== */
    .huesped-card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 16px;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 12px;
    }

    .huesped-avatar {
      width: 48px;
      height: 48px;
      background: var(--gerente);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .huesped-avatar.acompanante { background: var(--sage); }
    .huesped-avatar.invitado { background: var(--gold); }

    .huesped-info { flex: 1; }
    .huesped-nombre { font-weight: 700; }
    .huesped-tipo { font-size: 0.8rem; color: var(--text-muted); }

    .huesped-habitacion {
      padding: 6px 12px;
      background: var(--cream);
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
    }

    /* ========== INGRESOS ========== */
    .ingresos-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .ingreso-tab {
      padding: 10px 16px;
      background: var(--white);
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-full);
      font-family: 'Nunito', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .ingreso-tab:hover { border-color: var(--gerente-light); }
    .ingreso-tab.active { background: var(--gerente); color: white; border-color: var(--gerente); }

    /* ========== TARIFAS ========== */
    .tarifa-card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 16px;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .tarifa-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .tarifa-icon {
      width: 40px;
      height: 40px;
      background: var(--gerente-muted);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .tarifa-nombre { font-weight: 700; }
    .tarifa-descripcion { font-size: 0.8rem; color: var(--text-muted); }

    .tarifa-precio {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--gerente);
    }

    .tarifa-precio span {
      font-size: 0.8rem;
      font-weight: 400;
      color: var(--text-muted);
    }

    /* ========== DESCUENTOS (solo visible internamente) ========== */
    .descuentos-card {
      background: var(--gold-muted);
      border: 2px dashed var(--gold);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-top: 24px;
    }

    .descuentos-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .descuentos-header h3 {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
    }

    .descuentos-badge {
      padding: 4px 10px;
      background: var(--gold);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.7rem;
      font-weight: 700;
    }

    .descuento-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px dashed var(--gold);
    }

    .descuento-item:last-child { border-bottom: none; }

    .descuento-valor {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      color: var(--gold);
    }

    /* ========== SERVICIOS EXTERNOS ========== */
    .servicio-externo-card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 16px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 12px;
    }

    .servicio-externo-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .servicio-externo-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .servicio-externo-icon {
      width: 44px;
      height: 44px;
      background: var(--terracotta-muted);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
    }

    .servicio-externo-reserva {
      font-size: 0.8rem;
      color: var(--text-muted);
      padding: 8px 12px;
      background: var(--cream);
      border-radius: var(--radius-md);
    }

    /* ========== MODALS ========== */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      padding: 20px;
    }

    .modal-overlay.active { opacity: 1; visibility: visible; }

    .modal {
      background: var(--white);
      border-radius: var(--radius-lg);
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1px solid var(--cream-dark);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-title {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border: none;
      background: var(--cream);
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover { background: var(--cream-dark); }

    .modal-body { padding: 20px; }
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--cream-dark);
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    /* ========== FORMS ========== */
    .form-group { margin-bottom: 16px; }

    .form-label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--text);
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-md);
      font-family: 'Nunito', sans-serif;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--gerente);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .form-checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .form-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      background: var(--cream);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s;
    }

    .form-checkbox:has(input:checked) {
      background: var(--gerente-muted);
      color: var(--gerente);
    }

    .form-checkbox input { display: none; }

    /* ========== EMPTY STATE ========== */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }

    .empty-state-icon { font-size: 4rem; margin-bottom: 16px; opacity: 0.5; }
    .empty-state-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; color: var(--text); }
    .empty-state-text { font-size: 0.9rem; margin-bottom: 20px; }

    /* ========== UTILITIES ========== */
    .hidden { display: none !important; }
    .text-right { text-align: right; }
    .text-center { text-align: center; }
    .mt-20 { margin-top: 20px; }
    .mb-20 { margin-bottom: 20px; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <a href="bien.html" class="back-btn" id="btn-volver">
        â† Volver al bien
      </a>
      <div class="header-title">
        <div class="header-icon">ğŸ‘”</div>
        <div class="header-info">
          <h1>GERENTE</h1>
          <p id="nombre-bien">Cargando...</p>
        </div>
      </div>
    </div>
    <span class="header-badge">ExplotaciÃ³n activa</span>
  </header>

  <!-- Layout -->
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <!-- OPERACIONES -->
      <div class="sidebar-section">
        <div class="sidebar-title">Operaciones</div>
        <nav class="sidebar-nav">
          <button class="sidebar-link active" data-section="reservas">
            <span class="sidebar-link-icon">ğŸ“…</span>
            Reservas
            <span class="sidebar-link-badge gold" id="badge-reservas" style="display:none;">0</span>
          </button>
          <button class="sidebar-link" data-section="huespedes">
            <span class="sidebar-link-icon">ğŸ›ï¸</span>
            HuÃ©spedes
          </button>
          <button class="sidebar-link" data-section="actividades">
            <span class="sidebar-link-icon">ğŸ¯</span>
            Actividades
          </button>
          <button class="sidebar-link" data-section="mantenimiento">
            <span class="sidebar-link-icon">ğŸ”§</span>
            Mantenimiento
          </button>
          <button class="sidebar-link" data-section="limpieza">
            <span class="sidebar-link-icon">ğŸ§¹</span>
            Limpieza
          </button>
          <button class="sidebar-link" data-section="inventario">
            <span class="sidebar-link-icon">ğŸ“¦</span>
            Inventario
            <span class="sidebar-link-badge" id="badge-inventario" style="display:none;">0</span>
          </button>
          <button class="sidebar-link" data-section="servicios-externos">
            <span class="sidebar-link-icon">ğŸš</span>
            Servicios Externos
          </button>
        </nav>
      </div>

      <!-- ECONÃ“MICO -->
      <div class="sidebar-section">
        <div class="sidebar-title">EconÃ³mico</div>
        <nav class="sidebar-nav">
          <button class="sidebar-link" data-section="estadisticas">
            <span class="sidebar-link-icon">ğŸ“Š</span>
            EstadÃ­sticas
          </button>
          <button class="sidebar-link" data-section="ingresos">
            <span class="sidebar-link-icon">ğŸ’°</span>
            Ingresos
          </button>
          <button class="sidebar-link" data-section="gastos">
            <span class="sidebar-link-icon">ğŸ’¶</span>
            Gastos
          </button>
        </nav>
      </div>

      <!-- CONFIGURACIÃ“N -->
      <div class="sidebar-section">
        <div class="sidebar-title">ConfiguraciÃ³n</div>
        <nav class="sidebar-nav">
          <button class="sidebar-link" data-section="habitaciones">
            <span class="sidebar-link-icon">ğŸ¨</span>
            Habitaciones
          </button>
          <button class="sidebar-link" data-section="tarifas">
            <span class="sidebar-link-icon">ğŸ’²</span>
            Tarifas
          </button>
          <button class="sidebar-link" data-section="plantilla">
            <span class="sidebar-link-icon">ğŸ“‹</span>
            Plantilla BÃ¡sica
          </button>
          <button class="sidebar-link" data-section="hoster">
            <span class="sidebar-link-icon">ğŸ </span>
            Hoster
          </button>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- ==================== RESERVAS ==================== -->
      <section class="section active" id="section-reservas">
        <div class="section-header">
          <h2 class="section-title">ğŸ“… Reservas</h2>
          <p class="section-description">GestiÃ³n de estancias con confirmaciÃ³n</p>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card highlight">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-value" id="stat-reservas-mes">0</div>
            <div class="stat-label">Reservas este mes</div>
          </div>
          <div class="stat-card gold">
            <div class="stat-icon">ğŸ </div>
            <div class="stat-value" id="stat-reservas-nido">0</div>
            <div class="stat-label">Uso familiar</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">â³</div>
            <div class="stat-value" id="stat-pendientes">0</div>
            <div class="stat-label">Pendientes confirmar</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ›ï¸</div>
            <div class="stat-value" id="stat-noches">0</div>
            <div class="stat-label">Noches ocupadas</div>
          </div>
        </div>

        <!-- Acciones -->
        <div class="card-header" style="background:transparent;padding:0;border:none;margin-bottom:20px;">
          <div></div>
          <button class="btn btn-gerente" onclick="abrirModalReserva()">+ Nueva reserva</button>
        </div>

        <!-- Tabla de reservas -->
        <div class="card">
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Ref.</th>
                  <th>Titular</th>
                  <th>Entrada</th>
                  <th>Salida</th>
                  <th>HuÃ©spedes</th>
                  <th>Estado</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="tabla-reservas">
                <tr>
                  <td>#0042</td>
                  <td><strong>Juan GarcÃ­a</strong></td>
                  <td>15 Jul 2025</td>
                  <td>18 Jul 2025</td>
                  <td>5 personas</td>
                  <td><span class="estado confirmada">âœ“ Confirmada</span></td>
                  <td><button class="btn btn-sm btn-secondary">Ver</button></td>
                </tr>
                <tr>
                  <td>#0043</td>
                  <td><strong>Familia PÃ©rez</strong></td>
                  <td>22 Jul 2025</td>
                  <td>25 Jul 2025</td>
                  <td>4 personas</td>
                  <td><span class="estado nido">ğŸ  Nido 50%</span></td>
                  <td><button class="btn btn-sm btn-secondary">Ver</button></td>
                </tr>
                <tr>
                  <td>#0044</td>
                  <td><strong>Carlos Ruiz</strong></td>
                  <td>1 Ago 2025</td>
                  <td>3 Ago 2025</td>
                  <td>2 personas</td>
                  <td><span class="estado pendiente">â³ Pendiente</span></td>
                  <td><button class="btn btn-sm btn-secondary">Ver</button></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ==================== HUÃ‰SPEDES ==================== -->
      <section class="section" id="section-huespedes">
        <div class="section-header">
          <h2 class="section-title">ğŸ›ï¸ HuÃ©spedes</h2>
          <p class="section-description">Registro de estancias: Titular, AcompaÃ±ante e Invitados</p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-title">Reserva #0042 â€” 15-18 Jul 2025</span>
            <button class="btn btn-sm btn-gerente">+ AÃ±adir huÃ©sped</button>
          </div>
          <div class="card-body">
            <!-- Titular -->
            <div class="huesped-card">
              <div class="huesped-avatar">ğŸ‘¤</div>
              <div class="huesped-info">
                <div class="huesped-nombre">Juan GarcÃ­a</div>
                <div class="huesped-tipo">ğŸ§‘â€ğŸ’¼ Titular â€” Responsable de pago</div>
              </div>
              <span class="huesped-habitacion">ğŸ›ï¸ Suite Principal</span>
            </div>

            <!-- AcompaÃ±ante -->
            <div class="huesped-card">
              <div class="huesped-avatar acompanante">ğŸ‘¤</div>
              <div class="huesped-info">
                <div class="huesped-nombre">MarÃ­a LÃ³pez</div>
                <div class="huesped-tipo">ğŸ‘« AcompaÃ±ante â€” Misma habitaciÃ³n que titular</div>
              </div>
              <span class="huesped-habitacion">ğŸ›ï¸ Suite Principal</span>
            </div>

            <!-- Invitados -->
            <div class="huesped-card">
              <div class="huesped-avatar invitado">ğŸ‘¤</div>
              <div class="huesped-info">
                <div class="huesped-nombre">Pedro Ruiz</div>
                <div class="huesped-tipo">ğŸŸï¸ Invitado â€” Paga el titular</div>
              </div>
              <span class="huesped-habitacion">ğŸ›ï¸ Hab. Azul</span>
            </div>

            <div class="huesped-card">
              <div class="huesped-avatar invitado">ğŸ‘¤</div>
              <div class="huesped-info">
                <div class="huesped-nombre">Ana Torres</div>
                <div class="huesped-tipo">ğŸŸï¸ Invitado â€” Paga el titular</div>
              </div>
              <span class="huesped-habitacion">ğŸ›ï¸ Hab. Verde</span>
            </div>

            <div class="huesped-card">
              <div class="huesped-avatar invitado">ğŸ‘¤</div>
              <div class="huesped-info">
                <div class="huesped-nombre">Luis Torres</div>
                <div class="huesped-tipo">ğŸŸï¸ Invitado â€” Paga el titular</div>
              </div>
              <span class="huesped-habitacion">ğŸ›ï¸ Hab. Verde</span>
            </div>

            <!-- Resumen hospitalidad -->
            <div class="card mt-20" style="background:var(--cream);">
              <div class="card-body">
                <h4 style="margin-bottom:12px;">ğŸ½ï¸ Hospitalidad (Pack Cena/Desayuno/Bar)</h4>
                <p>3 noches Ã— 5 huÃ©spedes = <strong>15 packs</strong></p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ==================== ACTIVIDADES ==================== -->
      <section class="section" id="section-actividades">
        <div class="section-header">
          <h2 class="section-title">ğŸ¯ Actividades</h2>
          <p class="section-description">Excursiones, visitas, eventos y experiencias</p>
        </div>

        <div class="card-header" style="background:transparent;padding:0;border:none;margin-bottom:20px;">
          <div class="ingresos-tabs" id="tabs-actividades">
            <button class="ingreso-tab active">Todas</button>
            <button class="ingreso-tab">ğŸ¥¾ Excursiones</button>
            <button class="ingreso-tab">ğŸ›ï¸ Visitas</button>
            <button class="ingreso-tab">ğŸ¯ Tiro</button>
            <button class="ingreso-tab">ğŸ· Bar</button>
            <button class="ingreso-tab">ğŸ“… Otros</button>
            <button class="ingreso-tab" style="border-style:dashed;color:var(--text-muted);" onclick="abrirModalGrupoActividad()">+ Grupo</button>
          </div>
          <button class="btn btn-gerente">+ Nueva actividad</button>
        </div>

        <div class="card">
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Actividad</th>
                  <th>Tipo</th>
                  <th>Fecha</th>
                  <th>Reserva</th>
                  <th>Participantes</th>
                  <th>Importe</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Ruta de senderismo</strong></td>
                  <td>ğŸ¥¾ ExcursiÃ³n</td>
                  <td>16 Jul 2025</td>
                  <td>#0042</td>
                  <td>5</td>
                  <td class="text-right"><strong>150 â‚¬</strong></td>
                </tr>
                <tr>
                  <td><strong>Visita bodega</strong></td>
                  <td>ğŸ›ï¸ Visita</td>
                  <td>17 Jul 2025</td>
                  <td>#0042</td>
                  <td>5</td>
                  <td class="text-right"><strong>75 â‚¬</strong></td>
                </tr>
                <tr>
                  <td><strong>Tirada al plato</strong></td>
                  <td>ğŸ¯ Tiro</td>
                  <td>17 Jul 2025</td>
                  <td>#0042</td>
                  <td>3</td>
                  <td class="text-right"><strong>120 â‚¬</strong></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ==================== INGRESOS ==================== -->
      <section class="section" id="section-ingresos">
        <div class="section-header">
          <h2 class="section-title">ğŸ’° Ingresos</h2>
          <p class="section-description">Control de facturaciÃ³n por concepto</p>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card gold">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-value">4.250 â‚¬</div>
            <div class="stat-label">Total mes</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ›ï¸</div>
            <div class="stat-value">2.800 â‚¬</div>
            <div class="stat-label">Estancias</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ½ï¸</div>
            <div class="stat-value">975 â‚¬</div>
            <div class="stat-label">Hospitalidad</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-value">475 â‚¬</div>
            <div class="stat-label">Actividades</div>
          </div>
        </div>

        <!-- Tabs por tipo -->
        <div class="ingresos-tabs">
          <button class="ingreso-tab active">Todos</button>
          <button class="ingreso-tab">ğŸ›ï¸ Estancias</button>
          <button class="ingreso-tab">ğŸ½ï¸ Hospitalidad</button>
          <button class="ingreso-tab">ğŸ¯ Actividades</button>
          <button class="ingreso-tab">ğŸš Otros servicios</button>
        </div>

        <div class="card">
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Concepto</th>
                  <th>Tipo</th>
                  <th>Reserva</th>
                  <th>Fecha</th>
                  <th>Importe</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Estancia 3 noches â€” Suite + 2 hab.</strong></td>
                  <td>ğŸ›ï¸ Estancia</td>
                  <td>#0042</td>
                  <td>15-18 Jul</td>
                  <td class="text-right"><strong>1.200 â‚¬</strong></td>
                </tr>
                <tr>
                  <td><strong>Pack hospitalidad Ã— 15</strong></td>
                  <td>ğŸ½ï¸ Hospitalidad</td>
                  <td>#0042</td>
                  <td>15-18 Jul</td>
                  <td class="text-right"><strong>450 â‚¬</strong></td>
                </tr>
                <tr>
                  <td><strong>ExcursiÃ³n + Visita bodega + Tiro</strong></td>
                  <td>ğŸ¯ Actividades</td>
                  <td>#0042</td>
                  <td>16-17 Jul</td>
                  <td class="text-right"><strong>345 â‚¬</strong></td>
                </tr>
                <tr>
                  <td><strong>Traslado aeropuerto (ida/vuelta)</strong></td>
                  <td>ğŸš Otros</td>
                  <td>#0042</td>
                  <td>15/18 Jul</td>
                  <td class="text-right"><strong>180 â‚¬</strong></td>
                </tr>
              </tbody>
              <tfoot>
                <tr style="background:var(--cream);">
                  <td colspan="4"><strong>TOTAL RESERVA #0042</strong></td>
                  <td class="text-right"><strong style="color:var(--gold);font-size:1.1rem;">2.175 â‚¬</strong></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </section>

      <!-- ==================== ESTADÃSTICAS ==================== -->
      <section class="section" id="section-estadisticas">
        <div class="section-header">
          <h2 class="section-title">ğŸ“Š EstadÃ­sticas</h2>
          <p class="section-description">VisiÃ³n general del rendimiento</p>
        </div>

        <!-- Selector de perÃ­odo -->
        <div class="card-header" style="background:transparent;padding:0;border:none;margin-bottom:20px;">
          <div class="ingresos-tabs">
            <button class="ingreso-tab">Este mes</button>
            <button class="ingreso-tab active">Trimestre</button>
            <button class="ingreso-tab">Este aÃ±o</button>
            <button class="ingreso-tab">HistÃ³rico</button>
          </div>
          <button class="btn btn-secondary" onclick="exportarEstadisticas()">ğŸ“„ Exportar PDF</button>
        </div>

        <!-- KPIs principales -->
        <div class="stats-grid" style="margin-bottom:24px;">
          <div class="stat-card gold">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-value">12.750 â‚¬</div>
            <div class="stat-label">Ingresos totales</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’¶</div>
            <div class="stat-value">3.420 â‚¬</div>
            <div class="stat-label">Gastos totales</div>
          </div>
          <div class="stat-card highlight">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-value">9.330 â‚¬</div>
            <div class="stat-label">Beneficio neto</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“Š</div>
            <div class="stat-value">73%</div>
            <div class="stat-label">Margen operativo</div>
          </div>
        </div>

        <!-- Desglose de ingresos -->
        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ’° Desglose de Ingresos</span>
          </div>
          <div class="card-body">
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:16px;">
              <div style="background:var(--cream);border-radius:var(--radius-md);padding:16px;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:8px;">ğŸ›ï¸</div>
                <div style="font-size:1.4rem;font-weight:700;font-family:'Quicksand',sans-serif;">7.200 â‚¬</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Estancias (56%)</div>
              </div>
              <div style="background:var(--cream);border-radius:var(--radius-md);padding:16px;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:8px;">ğŸ½ï¸</div>
                <div style="font-size:1.4rem;font-weight:700;font-family:'Quicksand',sans-serif;">2.850 â‚¬</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Hospitalidad (22%)</div>
              </div>
              <div style="background:var(--cream);border-radius:var(--radius-md);padding:16px;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:8px;">ğŸ¯</div>
                <div style="font-size:1.4rem;font-weight:700;font-family:'Quicksand',sans-serif;">1.890 â‚¬</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Actividades (15%)</div>
              </div>
              <div style="background:var(--cream);border-radius:var(--radius-md);padding:16px;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:8px;">ğŸš</div>
                <div style="font-size:1.4rem;font-weight:700;font-family:'Quicksand',sans-serif;">810 â‚¬</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Otros (7%)</div>
              </div>
            </div>
          </div>
        </div>

        <!-- OcupaciÃ³n -->
        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ›ï¸ OcupaciÃ³n</span>
          </div>
          <div class="card-body">
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:16px;">
              <div style="text-align:center;">
                <div style="font-size:2rem;font-weight:700;font-family:'Quicksand',sans-serif;color:var(--gerente);">68%</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">OcupaciÃ³n media</div>
              </div>
              <div style="text-align:center;">
                <div style="font-size:2rem;font-weight:700;font-family:'Quicksand',sans-serif;color:var(--gerente);">42</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Noches ocupadas</div>
              </div>
              <div style="text-align:center;">
                <div style="font-size:2rem;font-weight:700;font-family:'Quicksand',sans-serif;color:var(--gerente);">14</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Reservas</div>
              </div>
              <div style="text-align:center;">
                <div style="font-size:2rem;font-weight:700;font-family:'Quicksand',sans-serif;color:var(--gold);">4</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Uso familiar</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Habitaciones mÃ¡s rentables -->
        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ† Habitaciones mÃ¡s rentables</span>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon" style="background:var(--gold-muted);">1</div>
                <div>
                  <div class="tarifa-nombre">Suite Principal</div>
                  <div class="tarifa-descripcion">28 noches ocupadas (93%)</div>
                </div>
              </div>
              <div class="tarifa-precio" style="color:var(--gold);">5.040 â‚¬ </div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">2</div>
                <div>
                  <div class="tarifa-nombre">HabitaciÃ³n Azul</div>
                  <div class="tarifa-descripcion">21 noches ocupadas (70%)</div>
                </div>
              </div>
              <div class="tarifa-precio">2.520 â‚¬</div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">3</div>
                <div>
                  <div class="tarifa-nombre">HabitaciÃ³n Verde</div>
                  <div class="tarifa-descripcion">18 noches ocupadas (60%)</div>
                </div>
              </div>
              <div class="tarifa-precio">1.800 â‚¬</div>
            </div>
          </div>
        </div>

        <!-- Top actividades -->
        <div class="card">
          <div class="card-header">
            <span class="card-title">ğŸ¯ Actividades mÃ¡s contratadas</span>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ¥¾</div>
                <div>
                  <div class="tarifa-nombre">Excursiones guiadas</div>
                  <div class="tarifa-descripcion">32 participantes</div>
                </div>
              </div>
              <div class="tarifa-precio">960 â‚¬</div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ¯</div>
                <div>
                  <div class="tarifa-nombre">Tirada al plato</div>
                  <div class="tarifa-descripcion">18 participantes</div>
                </div>
              </div>
              <div class="tarifa-precio">720 â‚¬</div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ›ï¸</div>
                <div>
                  <div class="tarifa-nombre">Visitas bodega</div>
                  <div class="tarifa-descripcion">14 participantes</div>
                </div>
              </div>
              <div class="tarifa-precio">210 â‚¬</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ==================== GASTOS ==================== -->
      <section class="section" id="section-gastos">
        <div class="section-header">
          <h2 class="section-title">ğŸ’¶ Gastos</h2>
          <p class="section-description">Control de costes operativos</p>
        </div>
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ’¶</div>
          <div class="empty-state-title">MÃ³dulo de Gastos</div>
          <div class="empty-state-text">Registra suministros, mantenimiento, personal...</div>
          <button class="btn btn-gerente">+ AÃ±adir gasto</button>
        </div>
      </section>

      <!-- ==================== HABITACIONES ==================== -->
      <section class="section" id="section-habitaciones">
        <div class="section-header">
          <h2 class="section-title">ğŸ¨ Habitaciones y Espacios</h2>
          <p class="section-description">ConfiguraciÃ³n del alojamiento</p>
        </div>

        <h3 style="margin-bottom:16px;font-family:'Quicksand',sans-serif;">ğŸ›ï¸ Alojamiento</h3>
        
        <div class="habitaciones-grid mb-20">
          <!-- HabitaciÃ³n 1 -->
          <div class="habitacion-card">
            <div class="habitacion-header">
              <div class="habitacion-numero">1</div>
              <div class="habitacion-info">
                <div class="habitacion-nombre">Suite Principal</div>
                <div class="habitacion-config">Cama matrimonio + sofÃ¡ cama</div>
              </div>
            </div>
            <div class="habitacion-detalles">
              <span class="habitacion-tag">ğŸ‘¥ 2+1 personas</span>
              <span class="habitacion-tag">ğŸ“ 28 mÂ²</span>
              <span class="habitacion-tag">ğŸš¿ BaÃ±o privado</span>
            </div>
            <div class="habitacion-servicios">
              <span class="servicio-icon activo" title="Aire acondicionado">â„ï¸</span>
              <span class="servicio-icon activo" title="TV">ğŸ“º</span>
              <span class="servicio-icon activo" title="Minibar">ğŸ·</span>
              <span class="servicio-icon activo" title="Terraza">ğŸŒ¿</span>
              <span class="servicio-icon" title="BaÃ±era">ğŸ›</span>
            </div>
          </div>

          <!-- HabitaciÃ³n 2 -->
          <div class="habitacion-card">
            <div class="habitacion-header">
              <div class="habitacion-numero">2</div>
              <div class="habitacion-info">
                <div class="habitacion-nombre">HabitaciÃ³n Azul</div>
                <div class="habitacion-config">Cama doble</div>
              </div>
            </div>
            <div class="habitacion-detalles">
              <span class="habitacion-tag">ğŸ‘¥ 2 personas</span>
              <span class="habitacion-tag">ğŸ“ 18 mÂ²</span>
              <span class="habitacion-tag">ğŸš¿ BaÃ±o privado</span>
            </div>
            <div class="habitacion-servicios">
              <span class="servicio-icon activo" title="Aire acondicionado">â„ï¸</span>
              <span class="servicio-icon activo" title="TV">ğŸ“º</span>
              <span class="servicio-icon" title="Minibar">ğŸ·</span>
              <span class="servicio-icon" title="Terraza">ğŸŒ¿</span>
              <span class="servicio-icon" title="BaÃ±era">ğŸ›</span>
            </div>
          </div>

          <!-- HabitaciÃ³n 3 -->
          <div class="habitacion-card">
            <div class="habitacion-header">
              <div class="habitacion-numero">3</div>
              <div class="habitacion-info">
                <div class="habitacion-nombre">HabitaciÃ³n Verde</div>
                <div class="habitacion-config">2 camas individuales</div>
              </div>
            </div>
            <div class="habitacion-detalles">
              <span class="habitacion-tag">ğŸ‘¥ 2 personas</span>
              <span class="habitacion-tag">ğŸ“ 16 mÂ²</span>
              <span class="habitacion-tag">ğŸš¿ BaÃ±o compartido</span>
            </div>
            <div class="habitacion-servicios">
              <span class="servicio-icon activo" title="Aire acondicionado">â„ï¸</span>
              <span class="servicio-icon activo" title="TV">ğŸ“º</span>
              <span class="servicio-icon" title="Minibar">ğŸ·</span>
              <span class="servicio-icon" title="Terraza">ğŸŒ¿</span>
              <span class="servicio-icon" title="BaÃ±era">ğŸ›</span>
            </div>
          </div>
        </div>

        <div style="margin-bottom:20px;">
          <button class="btn btn-gerente">+ AÃ±adir habitaciÃ³n</button>
        </div>

        <h3 style="margin-bottom:16px;font-family:'Quicksand',sans-serif;">ğŸ›ï¸ Otros Espacios</h3>

        <div class="habitaciones-grid">
          <div class="habitacion-card">
            <div class="habitacion-header">
              <div class="habitacion-numero" style="background:var(--terracotta);">P</div>
              <div class="habitacion-info">
                <div class="habitacion-nombre">PabellÃ³n de caza</div>
                <div class="habitacion-config">Sala multiusos</div>
              </div>
            </div>
            <div class="habitacion-detalles">
              <span class="habitacion-tag">ğŸ‘¥ Hasta 20 personas</span>
              <span class="habitacion-tag">ğŸ“ 80 mÂ²</span>
            </div>
          </div>

          <div class="habitacion-card">
            <div class="habitacion-header">
              <div class="habitacion-numero" style="background:var(--terracotta);">B</div>
              <div class="habitacion-info">
                <div class="habitacion-nombre">Sala con Bar</div>
                <div class="habitacion-config">Zona social</div>
              </div>
            </div>
            <div class="habitacion-detalles">
              <span class="habitacion-tag">ğŸ‘¥ Hasta 15 personas</span>
              <span class="habitacion-tag">ğŸ“ 45 mÂ²</span>
              <span class="habitacion-tag">ğŸ· Barra de bar</span>
            </div>
          </div>
        </div>

        <div class="mt-20">
          <button class="btn btn-secondary">+ AÃ±adir espacio</button>
        </div>
      </section>

      <!-- ==================== TARIFAS ==================== -->
      <section class="section" id="section-tarifas">
        <div class="section-header">
          <h2 class="section-title">ğŸ’² Tarifas</h2>
          <p class="section-description">Precios base y polÃ­tica de descuentos</p>
        </div>

        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ›ï¸ Alojamiento (por noche)</span>
            <button class="btn btn-sm btn-secondary">Editar</button>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">1ï¸âƒ£</div>
                <div>
                  <div class="tarifa-nombre">Suite Principal</div>
                  <div class="tarifa-descripcion">Matrimonio + sofÃ¡ cama, 28mÂ²</div>
                </div>
              </div>
              <div class="tarifa-precio">180 â‚¬ <span>/noche</span></div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">2ï¸âƒ£</div>
                <div>
                  <div class="tarifa-nombre">HabitaciÃ³n Azul</div>
                  <div class="tarifa-descripcion">Cama doble, 18mÂ²</div>
                </div>
              </div>
              <div class="tarifa-precio">120 â‚¬ <span>/noche</span></div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">3ï¸âƒ£</div>
                <div>
                  <div class="tarifa-nombre">HabitaciÃ³n Verde</div>
                  <div class="tarifa-descripcion">2 individuales, 16mÂ²</div>
                </div>
              </div>
              <div class="tarifa-precio">100 â‚¬ <span>/noche</span></div>
            </div>
          </div>
        </div>

        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ½ï¸ Hospitalidad</span>
            <button class="btn btn-sm btn-secondary">Editar</button>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ½ï¸</div>
                <div>
                  <div class="tarifa-nombre">Pack Cena + Desayuno + Bar</div>
                  <div class="tarifa-descripcion">Por huÃ©sped y noche</div>
                </div>
              </div>
              <div class="tarifa-precio">30 â‚¬ <span>/persona</span></div>
            </div>
          </div>
        </div>

        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸ¯ Actividades</span>
            <button class="btn btn-sm btn-secondary">Editar</button>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ¥¾</div>
                <div>
                  <div class="tarifa-nombre">ExcursiÃ³n guiada</div>
                  <div class="tarifa-descripcion">Medio dÃ­a</div>
                </div>
              </div>
              <div class="tarifa-precio">30 â‚¬ <span>/persona</span></div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ›ï¸</div>
                <div>
                  <div class="tarifa-nombre">Visita bodega</div>
                  <div class="tarifa-descripcion">Incluye cata</div>
                </div>
              </div>
              <div class="tarifa-precio">15 â‚¬ <span>/persona</span></div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ¯</div>
                <div>
                  <div class="tarifa-nombre">Tirada al plato</div>
                  <div class="tarifa-descripcion">25 platos + municiÃ³n</div>
                </div>
              </div>
              <div class="tarifa-precio">40 â‚¬ <span>/persona</span></div>
            </div>
          </div>
        </div>

        <div class="card mb-20">
          <div class="card-header">
            <span class="card-title">ğŸš Otros Servicios</span>
            <button class="btn btn-sm btn-secondary">Editar</button>
          </div>
          <div class="card-body">
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸš—</div>
                <div>
                  <div class="tarifa-nombre">Traslado aeropuerto</div>
                  <div class="tarifa-descripcion">Ida o vuelta</div>
                </div>
              </div>
              <div class="tarifa-precio">90 â‚¬ <span>/trayecto</span></div>
            </div>
            <div class="tarifa-card">
              <div class="tarifa-info">
                <div class="tarifa-icon">ğŸ›ï¸</div>
                <div>
                  <div class="tarifa-nombre">CesiÃ³n PabellÃ³n</div>
                  <div class="tarifa-descripcion">Jornada completa</div>
                </div>
              </div>
              <div class="tarifa-precio">200 â‚¬ <span>/dÃ­a</span></div>
            </div>
          </div>
        </div>

        <!-- DESCUENTOS (NO EXPORTABLE A PDF) -->
        <div class="descuentos-card">
          <div class="descuentos-header">
            <span style="font-size:1.5rem;">ğŸ”’</span>
            <h3>PolÃ­tica de Descuentos</h3>
            <span class="descuentos-badge">Solo uso interno â€” No exportable</span>
          </div>
          <div class="descuento-item">
            <div>
              <strong>Nido familiar (bajo peticiÃ³n)</strong>
              <div style="font-size:0.85rem;color:var(--text-muted);">Miembros de la familia cuando lo solicitan</div>
            </div>
            <div class="descuento-valor">-50%</div>
          </div>
          <div class="descuento-item">
            <div>
              <strong>Evento familiar</strong>
              <div style="font-size:0.85rem;color:var(--text-muted);">Celebraciones y reuniones familiares</div>
            </div>
            <div class="descuento-valor">-100%</div>
          </div>
        </div>
      </section>

      <!-- ==================== SERVICIOS EXTERNOS ==================== -->
      <section class="section" id="section-servicios-externos">
        <div class="section-header">
          <h2 class="section-title">ğŸš Servicios Externos</h2>
          <p class="section-description">Proveedores vinculados a reservas</p>
        </div>

        <div class="card-header" style="background:transparent;padding:0;border:none;margin-bottom:20px;">
          <div class="ingresos-tabs" id="tabs-servicios">
            <button class="ingreso-tab active">Todos</button>
            <button class="ingreso-tab">ğŸš— Chofer</button>
            <button class="ingreso-tab">ğŸŸï¸ Entradas</button>
            <button class="ingreso-tab">ğŸ§‘â€ğŸ« GuÃ­as</button>
            <button class="ingreso-tab">ğŸ¥¾ Excursiones</button>
            <button class="ingreso-tab">ğŸ½ï¸ Catering</button>
            <button class="ingreso-tab" style="border-style:dashed;color:var(--text-muted);" onclick="abrirModalGrupoServicio()">+ Grupo</button>
          </div>
          <button class="btn btn-gerente">+ Contratar servicio</button>
        </div>

        <div class="servicio-externo-card">
          <div class="servicio-externo-header">
            <div class="servicio-externo-info">
              <div class="servicio-externo-icon">ğŸš—</div>
              <div>
                <div style="font-weight:700;">Traslado aeropuerto</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Transportes LÃ³pez â€” 2 trayectos</div>
              </div>
            </div>
            <div class="servicio-externo-reserva">ğŸ“… Reserva #0042</div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <span style="font-size:0.9rem;">15 Jul (llegada) + 18 Jul (salida)</span>
            <strong style="color:var(--gerente);">180 â‚¬</strong>
          </div>
        </div>

        <div class="servicio-externo-card">
          <div class="servicio-externo-header">
            <div class="servicio-externo-info">
              <div class="servicio-externo-icon">ğŸ§‘â€ğŸ«</div>
              <div>
                <div style="font-weight:700;">GuÃ­a local</div>
                <div style="font-size:0.85rem;color:var(--text-muted);">Turismo Rural SL</div>
              </div>
            </div>
            <div class="servicio-externo-reserva">ğŸ“… Reserva #0042</div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <span style="font-size:0.9rem;">16 Jul â€” Ruta de senderismo</span>
            <strong style="color:var(--gerente);">75 â‚¬</strong>
          </div>
        </div>
      </section>

      <!-- ==================== MANTENIMIENTO ==================== -->
      <section class="section" id="section-mantenimiento">
        <div class="section-header">
          <h2 class="section-title">ğŸ”§ Mantenimiento</h2>
          <p class="section-description">Tareas programadas y averÃ­as</p>
        </div>
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ”§</div>
          <div class="empty-state-title">MÃ³dulo de Mantenimiento</div>
          <div class="empty-state-text">Registra tareas preventivas y correctivas</div>
          <button class="btn btn-gerente">+ Nueva tarea</button>
        </div>
      </section>

      <!-- ==================== LIMPIEZA ==================== -->
      <section class="section" id="section-limpieza">
        <div class="section-header">
          <h2 class="section-title">ğŸ§¹ Limpieza</h2>
          <p class="section-description">Turnos y checklists por habitaciÃ³n</p>
        </div>
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ§¹</div>
          <div class="empty-state-title">MÃ³dulo de Limpieza</div>
          <div class="empty-state-text">Programa limpiezas vinculadas a check-out</div>
          <button class="btn btn-gerente">+ Programar limpieza</button>
        </div>
      </section>

      <!-- ==================== INVENTARIO ==================== -->
      <section class="section" id="section-inventario">
        <div class="section-header">
          <h2 class="section-title">ğŸ“¦ Inventario</h2>
          <p class="section-description">GestiÃ³n de stock con alertas automÃ¡ticas</p>
        </div>
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ“¦</div>
          <div class="empty-state-title">MÃ³dulo de Inventario</div>
          <div class="empty-state-text">Control de productos y lista de compra</div>
          <button class="btn btn-gerente">+ AÃ±adir producto</button>
        </div>
      </section>

      <!-- ==================== PLANTILLA ==================== -->
      <section class="section" id="section-plantilla">
        <div class="section-header">
          <h2 class="section-title">ğŸ“‹ Plantilla de Inventario BÃ¡sico</h2>
          <p class="section-description">Define los subgrupos para organizar productos</p>
        </div>
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ“‹</div>
          <div class="empty-state-title">ConfiguraciÃ³n de plantilla</div>
          <div class="empty-state-text">IdÃ©ntico al mÃ³dulo de Mayordomo</div>
        </div>
      </section>

      <!-- ==================== ENCARGADOS ==================== -->
      <section class="section" id="section-hoster">
        <div class="section-header">
          <h2 class="section-title">ğŸ  Hoster</h2>
          <p class="section-description">Personal externo con acceso a gestiÃ³n de reservas y huÃ©spedes</p>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ‘¥ Hosters activos</h3>
            <button class="btn btn-gerente btn-sm" onclick="abrirModalHoster()">+ Invitar Hoster</button>
          </div>
          <div class="card-body">
            <div id="lista-hosters">
              <div class="empty-state-mini">
                <p>No hay hosters configurados</p>
                <small>Invita a un gestor externo para que administre reservas</small>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box" style="margin-top: 20px;">
          <strong>ğŸ’¡ Â¿QuÃ© es un Hoster?</strong><br>
          Persona externa (gestor de alquileres, conserje, administrador) con acceso limitado para:<br>
          â€¢ Gestionar reservas y check-in/check-out<br>
          â€¢ Ver y comunicarse con huÃ©spedes<br>
          â€¢ Registrar incidencias y limpieza<br>
          El Hoster accede a travÃ©s de <strong>hoster.html</strong> con su propia cuenta.
        </div>
      </section>

    </main>
  </div>

  <!-- Modal Nueva Reserva -->
  <div class="modal-overlay" id="modal-reserva">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">ğŸ“… Nueva Reserva</h3>
        <button class="modal-close" onclick="cerrarModales()">Ã—</button>
      </div>
      <form id="form-reserva">
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Nombre del titular</label>
            <input type="text" class="form-input" placeholder="Nombre completo" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Fecha entrada</label>
              <input type="date" class="form-input" required>
            </div>
            <div class="form-group">
              <label class="form-label">Fecha salida</label>
              <input type="date" class="form-input" required>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Habitaciones</label>
            <div class="form-checkbox-group">
              <label class="form-checkbox">
                <input type="checkbox" name="habitaciones" value="suite">
                <span>ğŸ›ï¸ Suite Principal</span>
              </label>
              <label class="form-checkbox">
                <input type="checkbox" name="habitaciones" value="azul">
                <span>ğŸ›ï¸ Hab. Azul</span>
              </label>
              <label class="form-checkbox">
                <input type="checkbox" name="habitaciones" value="verde">
                <span>ğŸ›ï¸ Hab. Verde</span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Tipo de reserva</label>
            <select class="form-select">
              <option value="externa">Externa (tarifa completa)</option>
              <option value="nido50">Nido familiar (50% dto.)</option>
              <option value="nido100">Evento familiar (100% dto.)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Notas</label>
            <textarea class="form-textarea" rows="3" placeholder="Observaciones..."></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="cerrarModales()">Cancelar</button>
          <button type="submit" class="btn btn-gerente">Crear reserva</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Nuevo Grupo de Actividad -->
  <div class="modal-overlay" id="modal-grupo-actividad">
    <div class="modal" style="max-width:400px;">
      <div class="modal-header">
        <h3 class="modal-title">ğŸ¯ Nuevo Grupo de Actividad</h3>
        <button class="modal-close" onclick="cerrarModales()">Ã—</button>
      </div>
      <form id="form-grupo-actividad" onsubmit="guardarGrupoActividad(event)">
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Icono</label>
            <div class="form-checkbox-group">
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ£" checked><span>ğŸ£</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ‡"><span>ğŸ‡</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸš´"><span>ğŸš´</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸŠ"><span>ğŸŠ</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="â›³"><span>â›³</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ¨"><span>ğŸ¨</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ­"><span>ğŸ­</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸª"><span>ğŸª</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ¶"><span>ğŸ¶</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-actividad" value="ğŸ³"><span>ğŸ³</span></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Nombre del grupo</label>
            <input type="text" class="form-input" id="nombre-grupo-actividad" placeholder="Ej: Pesca, HÃ­pica, Golf..." required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="cerrarModales()">Cancelar</button>
          <button type="submit" class="btn btn-gerente">Crear grupo</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Nuevo Grupo de Servicio Externo -->
  <div class="modal-overlay" id="modal-grupo-servicio">
    <div class="modal" style="max-width:400px;">
      <div class="modal-header">
        <h3 class="modal-title">ğŸš Nuevo Grupo de Servicio</h3>
        <button class="modal-close" onclick="cerrarModales()">Ã—</button>
      </div>
      <form id="form-grupo-servicio" onsubmit="guardarGrupoServicio(event)">
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Icono</label>
            <div class="form-checkbox-group">
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸš" checked><span>ğŸš</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸš¤"><span>ğŸš¤</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ›µ"><span>ğŸ›µ</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ§–"><span>ğŸ§–</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ’†"><span>ğŸ’†</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ‘¨â€ğŸ³"><span>ğŸ‘¨â€ğŸ³</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ“¸"><span>ğŸ“¸</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ¤"><span>ğŸ¤</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸº"><span>ğŸº</span></label>
              <label class="form-checkbox"><input type="radio" name="icono-servicio" value="ğŸ”’"><span>ğŸ”’</span></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Nombre del grupo</label>
            <input type="text" class="form-input" id="nombre-grupo-servicio" placeholder="Ej: HelicÃ³ptero, Spa, Chef privado..." required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="cerrarModales()">Cancelar</button>
          <button type="submit" class="btn btn-gerente">Crear grupo</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <script>
    // ========== CONFIG ==========
    const firebaseConfig = {
      apiKey: "AIzaSyCprj6aJPl0dSYsv5xvLdJLylPEyFKpMPw",
      authDomain: "familynk-f93e8.firebaseapp.com",
      projectId: "familynk-f93e8",
      storageBucket: "familynk-f93e8.firebasestorage.app",
      messagingSenderId: "271953793018",
      appId: "1:271953793018:web:f7c548f98bda953f8bd498"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // ========== VARIABLES ==========
    let currentUser = null;
    let bienId = null;
    let bienData = null;

    // ========== INIT ==========
    document.addEventListener('DOMContentLoaded', () => {
      // Get bien ID from URL
      const params = new URLSearchParams(window.location.search);
      bienId = params.get('id');

      if (!bienId) {
        alert('No se ha especificado el bien');
        window.location.href = 'lo-comun.html';
        return;
      }

      // Check auth
      auth.onAuthStateChanged(async (user) => {
        if (user) {
          currentUser = user;
          await cargarBien();
          initEventListeners();
        } else {
          window.location.href = 'login.html';
        }
      });
    });

    async function cargarBien() {
      try {
        const doc = await db.collection('bienes').doc(bienId).get();
        if (doc.exists) {
          bienData = doc.data();
          document.getElementById('nombre-bien').textContent = bienData.nombre || 'Sin nombre';
          document.getElementById('btn-volver').href = `bien.html?id=${bienId}`;
        }
      } catch (error) {
        console.error('Error cargando bien:', error);
      }
    }

    // ========== NAVEGACIÃ“N ==========
    function cambiarSeccion(seccion) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      
      document.getElementById(`section-${seccion}`).classList.add('active');
      document.querySelector(`[data-section="${seccion}"]`).classList.add('active');
    }

    function initEventListeners() {
      // Sidebar links
      document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', () => {
          cambiarSeccion(link.dataset.section);
        });
      });
    }

    // ========== MODALES ==========
    function abrirModalReserva() {
      document.getElementById('modal-reserva').classList.add('active');
    }

    function abrirModalGrupoActividad() {
      document.getElementById('modal-grupo-actividad').classList.add('active');
    }

    function abrirModalGrupoServicio() {
      document.getElementById('modal-grupo-servicio').classList.add('active');
    }

    function cerrarModales() {
      document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
    }

    // ========== GRUPOS PERSONALIZADOS ==========
    function guardarGrupoActividad(e) {
      e.preventDefault();
      const icono = document.querySelector('input[name="icono-actividad"]:checked').value;
      const nombre = document.getElementById('nombre-grupo-actividad').value.trim();
      
      if (nombre) {
        const tabsContainer = document.getElementById('tabs-actividades');
        const addButton = tabsContainer.querySelector('[onclick="abrirModalGrupoActividad()"]');
        
        const newTab = document.createElement('button');
        newTab.className = 'ingreso-tab';
        newTab.innerHTML = `${icono} ${nombre}`;
        
        tabsContainer.insertBefore(newTab, addButton);
        
        // TODO: Guardar en Firebase
        cerrarModales();
        document.getElementById('nombre-grupo-actividad').value = '';
      }
    }

    function guardarGrupoServicio(e) {
      e.preventDefault();
      const icono = document.querySelector('input[name="icono-servicio"]:checked').value;
      const nombre = document.getElementById('nombre-grupo-servicio').value.trim();
      
      if (nombre) {
        const tabsContainer = document.getElementById('tabs-servicios');
        const addButton = tabsContainer.querySelector('[onclick="abrirModalGrupoServicio()"]');
        
        const newTab = document.createElement('button');
        newTab.className = 'ingreso-tab';
        newTab.innerHTML = `${icono} ${nombre}`;
        
        tabsContainer.insertBefore(newTab, addButton);
        
        // TODO: Guardar en Firebase
        cerrarModales();
        document.getElementById('nombre-grupo-servicio').value = '';
      }
    }

    // ========== ESTADÃSTICAS ==========
    function exportarEstadisticas() {
      // TODO: Implementar exportaciÃ³n a PDF (sin descuentos)
      alert('Exportando estadÃ­sticas a PDF...\n\nNota: Los descuentos internos NO se incluirÃ¡n en el documento.');
    }

    // Cerrar modales con click fuera
    document.querySelectorAll('.modal-overlay').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal-overlay')) cerrarModales();
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAMILYNK v2 â€” Ecosistemas Anidados</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #5B8C85;
      --primary-light: #7BA9A3;
      --primary-dark: #4A7570;
      --secondary: #F2E8DC;
      --secondary-dark: #E8DBC8;
      --accent: #E8985E;
      --accent-light: #F0B088;
      --text: #3D3D3D;
      --text-light: #6B6B6B;
      --text-muted: #9A9A9A;
      --background: #FAFAFA;
      --white: #FFFFFF;
      --success: #7DB59A;
      --warning: #E8C547;
      --error: #E07B7B;
      --sangre: #5B8C85;
      --consorte: #9B6B9E;
      --raiz: #5B8C85;
      --nucleo1: #E8985E;
      --nucleo2: #7DB59A;
      --nucleo3: #9B6B9E;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
      --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Nunito', sans-serif;
      background: var(--background);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    /* === HEADER === */
    .header {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      margin: -20px -20px 30px -20px;
      border-radius: 0 0 var(--radius-xl) var(--radius-xl);
    }

    .header-icon { font-size: 3rem; margin-bottom: 10px; }

    .header-title {
      font-family: 'Quicksand', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .header-sub { font-size: 1rem; opacity: 0.9; }

    /* === TABS PRINCIPALES === */
    .main-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      background: var(--white);
      padding: 8px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
    }

    .main-tab {
      flex: 1;
      padding: 12px 16px;
      background: none;
      border: none;
      font-family: 'Quicksand', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: var(--radius-md);
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .main-tab:hover { background: var(--secondary); color: var(--text); }
    .main-tab.active { background: var(--primary); color: white; }

    /* === SECTION === */
    .section {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-sm);
    }

    .section-title {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-subtitle {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 20px;
    }

    /* === ECOSISTEMA VISUAL === */
    .eco-container {
      padding: 20px;
      background: linear-gradient(135deg, #F8F9FA 0%, var(--secondary) 100%);
      border-radius: var(--radius-lg);
      overflow-x: auto;
    }

    .eco-raiz {
      border: 3px solid var(--raiz);
      border-radius: var(--radius-xl);
      padding: 24px;
      background: var(--white);
      position: relative;
    }

    .eco-raiz::before {
      content: 'ğŸŒ³ ECOSISTEMA RAÃZ';
      position: absolute;
      top: -12px;
      left: 20px;
      background: var(--raiz);
      color: white;
      padding: 4px 16px;
      border-radius: var(--radius-lg);
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .eco-raiz-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 20px;
      border-bottom: 2px dashed var(--secondary-dark);
      margin-bottom: 20px;
    }

    .eco-raiz-info {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .eco-raiz-avatars {
      display: flex;
      gap: -8px;
    }

    .eco-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      font-size: 1.1rem;
      border: 3px solid var(--white);
      box-shadow: var(--shadow-sm);
    }

    .eco-avatar.sangre { background: var(--sangre); }
    .eco-avatar.consorte { background: var(--consorte); }

    .eco-raiz-name {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .eco-raiz-meta {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .eco-raiz-modules {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .eco-module {
      padding: 8px 14px;
      background: var(--secondary);
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .eco-module:hover { background: var(--secondary-dark); }

    /* === NÃšCLEOS === */
    .nucleos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .nucleo-card {
      border: 2px solid var(--secondary-dark);
      border-radius: var(--radius-lg);
      padding: 20px;
      background: var(--white);
      position: relative;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .nucleo-card:hover {
      border-color: var(--primary);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .nucleo-card::before {
      content: attr(data-label);
      position: absolute;
      top: -10px;
      left: 16px;
      background: var(--white);
      padding: 2px 12px;
      border-radius: var(--radius-sm);
      font-size: 0.7rem;
      font-weight: 700;
      border: 2px solid;
      letter-spacing: 0.5px;
    }

    .nucleo-card[data-color="1"]::before { border-color: var(--nucleo1); color: var(--nucleo1); }
    .nucleo-card[data-color="2"]::before { border-color: var(--nucleo2); color: var(--nucleo2); }
    .nucleo-card[data-color="3"]::before { border-color: var(--nucleo3); color: var(--nucleo3); }

    .nucleo-card[data-color="1"] { border-left: 4px solid var(--nucleo1); }
    .nucleo-card[data-color="2"] { border-left: 4px solid var(--nucleo2); }
    .nucleo-card[data-color="3"] { border-left: 4px solid var(--nucleo3); }

    .nucleo-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .nucleo-avatars {
      display: flex;
      margin-left: -8px;
    }

    .nucleo-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      font-size: 0.9rem;
      border: 2px solid var(--white);
      margin-left: -8px;
    }

    .nucleo-info { flex: 1; }

    .nucleo-name {
      font-weight: 700;
      font-size: 0.95rem;
    }

    .nucleo-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .nucleo-members {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .nucleo-member {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: var(--secondary);
      border-radius: var(--radius-lg);
      font-size: 0.8rem;
    }

    .nucleo-member-avatar {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.6rem;
      font-weight: 700;
      color: white;
    }

    .nucleo-modules {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding-top: 12px;
      border-top: 1px dashed var(--secondary-dark);
    }

    .nucleo-module {
      padding: 4px 10px;
      background: var(--secondary);
      border-radius: var(--radius-sm);
      font-size: 0.7rem;
      color: var(--text-light);
    }

    /* === SOLTERO CARD === */
    .soltero-card {
      border: 2px dashed var(--text-muted);
      border-radius: var(--radius-lg);
      padding: 20px;
      background: var(--secondary);
      display: flex;
      align-items: center;
      gap: 16px;
      opacity: 0.8;
    }

    .soltero-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
    }

    .soltero-info { flex: 1; }
    .soltero-name { font-weight: 700; font-size: 0.95rem; }
    .soltero-meta { font-size: 0.75rem; color: var(--text-muted); }

    /* === ADMIN PANEL === */
    .admin-section {
      background: linear-gradient(135deg, #2D3748 0%, #1A202C 100%);
      color: white;
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 24px;
    }

    .admin-section .section-title { color: white; }
    .admin-section .section-subtitle { color: rgba(255,255,255,0.7); }

    .admin-tree {
      font-family: 'Courier New', monospace;
      font-size: 0.85rem;
      line-height: 1.8;
      padding: 20px;
      background: rgba(0,0,0,0.3);
      border-radius: var(--radius-md);
      overflow-x: auto;
    }

    .admin-tree .raiz { color: #68D391; }
    .admin-tree .nucleo { color: #F6AD55; }
    .admin-tree .miembro { color: #63B3ED; }
    .admin-tree .admin-badge { color: #FC8181; }
    .admin-tree .muted { color: rgba(255,255,255,0.5); }

    /* === PERMISOS GRID === */
    .permisos-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }

    .permisos-table th {
      text-align: left;
      padding: 12px;
      background: var(--secondary);
      font-weight: 600;
    }

    .permisos-table td {
      padding: 12px;
      border-bottom: 1px solid var(--secondary);
    }

    .permisos-table tr:hover td {
      background: var(--secondary);
    }

    .permiso-check {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      margin: 0 auto;
    }

    .permiso-check.yes { background: var(--success); color: white; }
    .permiso-check.no { background: var(--secondary-dark); color: var(--text-muted); }
    .permiso-check.config { background: var(--warning); color: white; }

    /* === USER VIEW === */
    .user-header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 20px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      border-radius: var(--radius-lg);
      color: white;
      margin-bottom: 20px;
    }

    .user-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .user-name {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.3rem;
      font-weight: 700;
    }

    .user-meta { font-size: 0.9rem; opacity: 0.9; }

    .user-levels {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .user-level {
      border: 2px solid var(--secondary-dark);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .user-level-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--secondary);
      cursor: pointer;
    }

    .user-level-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .user-level-icon.personal { background: var(--accent); }
    .user-level-icon.nucleo { background: var(--nucleo1); }
    .user-level-icon.raiz { background: var(--raiz); }

    .user-level-info { flex: 1; }
    .user-level-title { font-weight: 700; font-size: 0.95rem; }
    .user-level-subtitle { font-size: 0.75rem; color: var(--text-muted); }

    .user-level-content {
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
    }

    .user-level-module {
      padding: 12px;
      background: var(--secondary);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .user-level-module:hover {
      background: var(--secondary-dark);
      transform: scale(1.02);
    }

    .user-level-module-icon { font-size: 1.3rem; margin-bottom: 6px; }
    .user-level-module-name { font-size: 0.75rem; font-weight: 600; }

    /* === AJUAR Y LEGADO === */
    .patrimonio-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .patrimonio-section {
      border: 2px solid var(--secondary-dark);
      border-radius: var(--radius-lg);
      padding: 20px;
    }

    .patrimonio-section.ajuar { border-color: var(--accent); }
    .patrimonio-section.legado { border-color: var(--primary); }

    .patrimonio-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }

    .patrimonio-icon {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
    }

    .patrimonio-icon.ajuar { background: rgba(232,152,94,0.15); }
    .patrimonio-icon.legado { background: rgba(91,140,133,0.15); }

    .patrimonio-title {
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .patrimonio-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .patrimonio-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .patrimonio-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: var(--secondary);
      border-radius: var(--radius-md);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .patrimonio-item:hover { background: var(--secondary-dark); }

    .patrimonio-item-icon { font-size: 1.1rem; }

    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      .patrimonio-grid { grid-template-columns: 1fr; }
      .main-tab { font-size: 0.8rem; padding: 10px; }
      .main-tab span:last-child { display: none; }
    }
  </style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="header-icon">ğŸª†</div>
    <h1 class="header-title">FAMILYNK v2</h1>
    <p class="header-sub">Ecosistemas Anidados â€” Estructura Familiar</p>
  </div>

  <!-- TABS PRINCIPALES -->
  <div class="main-tabs">
    <button class="main-tab active" onclick="showTab('estructura')">
      <span>ğŸª†</span> <span>Estructura</span>
    </button>
    <button class="main-tab" onclick="showTab('admin')">
      <span>âš™ï¸</span> <span>Admin Panel</span>
    </button>
    <button class="main-tab" onclick="showTab('usuario')">
      <span>ğŸ‘¤</span> <span>Vista Usuario</span>
    </button>
    <button class="main-tab" onclick="showTab('patrimonio')">
      <span>ğŸ“¦</span> <span>Ajuar & Legado</span>
    </button>
  </div>

  <!-- CONTENIDO -->
  <div id="content">
    <!-- Se carga dinÃ¡micamente -->
  </div>

</div>

<script>
  const tabs = {
    estructura: `
      <div class="section">
        <h2 class="section-title">ğŸª† Ecosistemas Anidados</h2>
        <p class="section-subtitle">Cada familia dentro de la familia tiene su propio espacio, conectado al ecosistema raÃ­z.</p>

        <div class="eco-container">
          <div class="eco-raiz">
            
            <!-- CABECERA RAÃZ -->
            <div class="eco-raiz-header">
              <div class="eco-raiz-info">
                <div class="eco-raiz-avatars">
                  <div class="eco-avatar sangre">A</div>
                  <div class="eco-avatar consorte" style="margin-left: -12px;">C</div>
                </div>
                <div>
                  <div class="eco-raiz-name">Familia MartÃ­nez</div>
                  <div class="eco-raiz-meta">Antonio + Carmen Â· Bisabuelos Â· 3 generaciones activas</div>
                </div>
              </div>
              <div class="eco-raiz-modules">
                <div class="eco-module">ğŸŒ³ Ãrbol</div>
                <div class="eco-module">ğŸ“¦ Ajuar</div>
                <div class="eco-module">ğŸ“œ Legado</div>
                <div class="eco-module">âš–ï¸ Decisiones</div>
                <div class="eco-module">ğŸ‚ Eventos</div>
              </div>
            </div>

            <!-- NÃšCLEOS -->
            <div class="nucleos-grid">
              
              <!-- NÃšCLEO 1: Felipe + Elena -->
              <div class="nucleo-card" data-label="NÃšCLEO FAMILIAR" data-color="1">
                <div class="nucleo-header">
                  <div class="nucleo-avatars">
                    <div class="nucleo-avatar" style="background: var(--sangre);">F</div>
                    <div class="nucleo-avatar" style="background: var(--consorte);">E</div>
                  </div>
                  <div class="nucleo-info">
                    <div class="nucleo-name">Felipe + Elena</div>
                    <div class="nucleo-meta">Separados Â· Padres Â· Admin: Felipe</div>
                  </div>
                </div>
                <div class="nucleo-members">
                  <div class="nucleo-member">
                    <div class="nucleo-member-avatar" style="background: var(--sangre);">M</div>
                    Marcos (22)
                  </div>
                  <div class="nucleo-member">
                    <div class="nucleo-member-avatar" style="background: var(--sangre);">P</div>
                    Pablo (16)
                  </div>
                </div>
                <div class="nucleo-modules">
                  <span class="nucleo-module">ğŸ  Casa A</span>
                  <span class="nucleo-module">ğŸ¡ Casa B</span>
                  <span class="nucleo-module">â›°ï¸ 2Âª Viv</span>
                  <span class="nucleo-module">âš¡ Tareas</span>
                  <span class="nucleo-module">ğŸ’¬ TablÃ³n</span>
                </div>
              </div>

              <!-- NÃšCLEO 2: Rosa + Javier -->
              <div class="nucleo-card" data-label="NÃšCLEO FAMILIAR" data-color="2">
                <div class="nucleo-header">
                  <div class="nucleo-avatars">
                    <div class="nucleo-avatar" style="background: var(--sangre);">R</div>
                    <div class="nucleo-avatar" style="background: var(--consorte);">J</div>
                  </div>
                  <div class="nucleo-info">
                    <div class="nucleo-name">Rosa + Javier</div>
                    <div class="nucleo-meta">Casados Â· Padres Â· Admin: Rosa</div>
                  </div>
                </div>
                <div class="nucleo-members">
                  <div class="nucleo-member">
                    <div class="nucleo-member-avatar" style="background: var(--sangre);">S</div>
                    SofÃ­a (19)
                  </div>
                  <div class="nucleo-member">
                    <div class="nucleo-member-avatar" style="background: var(--sangre);">D</div>
                    David (14)
                  </div>
                </div>
                <div class="nucleo-modules">
                  <span class="nucleo-module">ğŸ  Su casa</span>
                  <span class="nucleo-module">âš¡ Tareas</span>
                  <span class="nucleo-module">ğŸ’¬ TablÃ³n</span>
                  <span class="nucleo-module">ğŸ“… Calendario</span>
                </div>
              </div>

              <!-- SOLTERO: Luis -->
              <div class="soltero-card">
                <div class="soltero-avatar">L</div>
                <div class="soltero-info">
                  <div class="soltero-name">Luis</div>
                  <div class="soltero-meta">Soltero Â· Sin nÃºcleo propio Â· Solo CPM</div>
                </div>
              </div>

            </div>

            <!-- FUTURO NÃšCLEO -->
            <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, #FEF9E7 0%, var(--secondary) 100%); border-radius: var(--radius-md); border: 1px dashed var(--warning);">
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="font-size: 1.5rem;">ğŸ’¡</span>
                <div>
                  <div style="font-weight: 600; font-size: 0.9rem;">Cuando Marcos forme pareja...</div>
                  <div style="font-size: 0.8rem; color: var(--text-light);">Se crearÃ¡ automÃ¡ticamente un nuevo nÃºcleo familiar con su propio ecosistema.</div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- REGLAS -->
      <div class="section">
        <h2 class="section-title">ğŸ“ Reglas del modelo</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--raiz);">
            <strong style="display: block; margin-bottom: 6px;">ğŸŒ³ Ecosistema RaÃ­z</strong>
            <span style="font-size: 0.85rem; color: var(--text-light);">El de la generaciÃ³n mÃ¡s alta con miembros vivos. Contiene Ãrbol, Ajuar, Legado y Decisiones comunes.</span>
          </div>
          
          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--nucleo1);">
            <strong style="display: block; margin-bottom: 6px;">ğŸ  NÃºcleo Familiar</strong>
            <span style="font-size: 0.85rem; color: var(--text-light);">Se crea cuando un miembro forma pareja. Gestiona su dÃ­a a dÃ­a: casas, tareas, comunicaciÃ³n.</span>
          </div>
          
          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--text-muted);">
            <strong style="display: block; margin-bottom: 6px;">ğŸ‘¤ Miembro sin nÃºcleo</strong>
            <span style="font-size: 0.85rem; color: var(--text-light);">Solteros tienen CPM personal y acceso al raÃ­z, pero sin ecosistema propio hasta formar familia.</span>
          </div>
          
          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--success);">
            <strong style="display: block; margin-bottom: 6px;">â¬†ï¸ Herencia de acceso</strong>
            <span style="font-size: 0.85rem; color: var(--text-light);">Los nÃºcleos heredan acceso al ecosistema raÃ­z. Lo comÃºn (Ajuar, Legado) siempre vive arriba.</span>
          </div>
        </div>
      </div>
    `,

    admin: `
      <div class="admin-section">
        <h2 class="section-title">âš™ï¸ Admin Panel</h2>
        <p class="section-subtitle">Vista del administrador para gestionar ecosistemas y permisos</p>

        <div class="admin-tree">
<span class="raiz">ğŸŒ³ ECOSISTEMA RAÃZ: Familia MartÃ­nez</span>
<span class="muted">â”‚   Admins: Felipe, Rosa</span>
<span class="muted">â”‚   Generaciones: 3 activas</span>
<span class="muted">â”‚</span>
<span class="muted">â”œâ”€â”€ </span><span class="raiz">ğŸ“¦ Ajuar</span><span class="muted"> (material comÃºn)</span>
<span class="muted">â”œâ”€â”€ </span><span class="raiz">ğŸ“œ Legado</span><span class="muted"> (emocional comÃºn)</span>
<span class="muted">â”œâ”€â”€ </span><span class="raiz">âš–ï¸ Decisiones</span><span class="muted"> (votaciones familia)</span>
<span class="muted">â”‚</span>
<span class="muted">â”œâ”€â”€ </span><span class="nucleo">ğŸ  NÃšCLEO: Felipe + Elena</span>
<span class="muted">â”‚   â”‚   </span><span class="admin-badge">Admin: Felipe</span>
<span class="muted">â”‚   â”œâ”€â”€ </span><span class="miembro">ğŸ‘¤ Marcos (22)</span><span class="muted"> - Activo</span>
<span class="muted">â”‚   â””â”€â”€ </span><span class="miembro">ğŸ‘¤ Pablo (16)</span><span class="muted"> - Menor (admin: Felipe/Elena)</span>
<span class="muted">â”‚</span>
<span class="muted">â”œâ”€â”€ </span><span class="nucleo">ğŸ  NÃšCLEO: Rosa + Javier</span>
<span class="muted">â”‚   â”‚   </span><span class="admin-badge">Admin: Rosa</span>
<span class="muted">â”‚   â”œâ”€â”€ </span><span class="miembro">ğŸ‘¤ SofÃ­a (19)</span><span class="muted"> - Activo</span>
<span class="muted">â”‚   â””â”€â”€ </span><span class="miembro">ğŸ‘¤ David (14)</span><span class="muted"> - Menor (admin: Rosa/Javier)</span>
<span class="muted">â”‚</span>
<span class="muted">â””â”€â”€ </span><span class="miembro">ğŸ‘¤ Luis</span><span class="muted"> - Sin nÃºcleo (solo CPM + acceso raÃ­z)</span>
        </div>
      </div>

      <div class="section">
        <h2 class="section-title">ğŸ” Matriz de Permisos</h2>
        <p class="section-subtitle">QuÃ© puede ver/hacer cada tipo de miembro</p>

        <table class="permisos-table">
          <thead>
            <tr>
              <th>Permiso</th>
              <th style="text-align: center;">Sangre adulto</th>
              <th style="text-align: center;">Consorte</th>
              <th style="text-align: center;">Menor</th>
              <th style="text-align: center;">No participa</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Ver Ãrbol</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Ver Ajuar</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Ver Legado</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Opinar en Decisiones</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Votar Decisiones</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Editar Ajuar</strong></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>AÃ±adir Legado</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
            <tr>
              <td><strong>Gestionar su NÃºcleo</strong></td>
              <td><div class="permiso-check yes">âœ“</div></td>
              <td><div class="permiso-check config">âš™</div></td>
              <td><div class="permiso-check no">â€”</div></td>
              <td><div class="permiso-check no">â€”</div></td>
            </tr>
          </tbody>
        </table>

        <div style="margin-top: 16px; display: flex; gap: 20px; font-size: 0.8rem;">
          <div style="display: flex; align-items: center; gap: 6px;">
            <div class="permiso-check yes" style="width: 16px; height: 16px; font-size: 0.6rem;">âœ“</div>
            <span>Siempre</span>
          </div>
          <div style="display: flex; align-items: center; gap: 6px;">
            <div class="permiso-check config" style="width: 16px; height: 16px; font-size: 0.6rem;">âš™</div>
            <span>Configurable por Admin</span>
          </div>
          <div style="display: flex; align-items: center; gap: 6px;">
            <div class="permiso-check no" style="width: 16px; height: 16px; font-size: 0.6rem;">â€”</div>
            <span>No disponible</span>
          </div>
        </div>
      </div>
    `,

    usuario: `
      <div class="section">
        <h2 class="section-title">ğŸ‘¤ Vista de Usuario: Marcos (22 aÃ±os)</h2>
        <p class="section-subtitle">AsÃ­ ve Marcos sus diferentes niveles de acceso</p>

        <div class="user-header">
          <div class="user-avatar">M</div>
          <div>
            <div class="user-name">Marcos</div>
            <div class="user-meta">22 aÃ±os Â· Nieto Â· NÃºcleo Felipe+Elena</div>
          </div>
        </div>

        <div class="user-levels">
          
          <!-- NIVEL 1: CPM -->
          <div class="user-level">
            <div class="user-level-header">
              <div class="user-level-icon personal">ğŸ‘¤</div>
              <div class="user-level-info">
                <div class="user-level-title">Mi Zona Personal (CPM)</div>
                <div class="user-level-subtitle">100% privado Â· Solo yo lo veo</div>
              </div>
            </div>
            <div class="user-level-content">
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“</div>
                <div class="user-level-module-name">Mi Info</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ¯</div>
                <div class="user-level-module-name">Mis Cosas</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“…</div>
                <div class="user-level-module-name">Mi Agenda</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ’°</div>
                <div class="user-level-module-name">Mis Finanzas</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“</div>
                <div class="user-level-module-name">Universidad</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">âš™ï¸</div>
                <div class="user-level-module-name">Config</div>
              </div>
            </div>
          </div>

          <!-- NIVEL 2: NÃšCLEO -->
          <div class="user-level">
            <div class="user-level-header">
              <div class="user-level-icon nucleo">ğŸ </div>
              <div class="user-level-info">
                <div class="user-level-title">Mi Familia (NÃºcleo Felipe+Elena)</div>
                <div class="user-level-subtitle">PapÃ¡, mamÃ¡, Pablo y yo Â· DÃ­a a dÃ­a</div>
              </div>
            </div>
            <div class="user-level-content">
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ </div>
                <div class="user-level-module-name">Casa A</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ¡</div>
                <div class="user-level-module-name">Casa B</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">âš¡</div>
                <div class="user-level-module-name">Tareas</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ’¬</div>
                <div class="user-level-module-name">TablÃ³n</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“…</div>
                <div class="user-level-module-name">Calendario</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ½ï¸</div>
                <div class="user-level-module-name">MenÃºs</div>
              </div>
            </div>
          </div>

          <!-- NIVEL 3: RAÃZ -->
          <div class="user-level">
            <div class="user-level-header">
              <div class="user-level-icon raiz">ğŸŒ³</div>
              <div class="user-level-info">
                <div class="user-level-title">La Familia (Ecosistema MartÃ­nez)</div>
                <div class="user-level-subtitle">Abuelos, tÃ­os, primos Â· Lo comÃºn</div>
              </div>
            </div>
            <div class="user-level-content">
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸŒ³</div>
                <div class="user-level-module-name">Ãrbol</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“¦</div>
                <div class="user-level-module-name">Ajuar</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ“œ</div>
                <div class="user-level-module-name">Legado</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ‚</div>
                <div class="user-level-module-name">Eventos</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ‘¥</div>
                <div class="user-level-module-name">Miembros</div>
              </div>
              <div class="user-level-module">
                <div class="user-level-module-icon">ğŸ’¬</div>
                <div class="user-level-module-name">TablÃ³n familia</div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- SELECTOR OTROS USUARIOS -->
      <div class="section">
        <h2 class="section-title">ğŸ”„ Ver como otro usuario</h2>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
          <button style="padding: 10px 16px; background: var(--accent); color: white; border: none; border-radius: var(--radius-md); cursor: pointer; font-family: inherit; font-weight: 600;">ğŸ‘¤ Marcos (actual)</button>
          <button style="padding: 10px 16px; background: var(--secondary); border: none; border-radius: var(--radius-md); cursor: pointer; font-family: inherit;">ğŸ‘¤ Pablo (16, menor)</button>
          <button style="padding: 10px 16px; background: var(--secondary); border: none; border-radius: var(--radius-md); cursor: pointer; font-family: inherit;">ğŸ‘¤ Elena (consorte)</button>
          <button style="padding: 10px 16px; background: var(--secondary); border: none; border-radius: var(--radius-md); cursor: pointer; font-family: inherit;">ğŸ‘¤ Luis (sin nÃºcleo)</button>
        </div>
      </div>
    `,

    patrimonio: `
      <div class="section">
        <h2 class="section-title">ğŸ“¦ğŸ“œ Ajuar y Legado</h2>
        <p class="section-subtitle">Lo material y lo emocional de la familia, claramente separados</p>

        <div class="patrimonio-grid">
          
          <!-- AJUAR -->
          <div class="patrimonio-section ajuar">
            <div class="patrimonio-header">
              <div class="patrimonio-icon ajuar">ğŸ“¦</div>
              <div>
                <div class="patrimonio-title">Ajuar</div>
                <div class="patrimonio-subtitle">Lo material Â· Propiedades, objetos, documentos</div>
              </div>
            </div>
            <div class="patrimonio-list">
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ¡</span>
                <span>Casa del pueblo</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ¢</span>
                <span>Piso de los abuelos</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ’</span>
                <span>Anillo de la bisabuela</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">âŒš</span>
                <span>Reloj del abuelo</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ–¼ï¸</span>
                <span>Cuadros antiguos</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸª‘</span>
                <span>Muebles heredados</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ“œ</span>
                <span>Escrituras y documentos</span>
              </div>
              <div class="patrimonio-item" style="background: var(--white); border: 1px dashed var(--text-muted); justify-content: center;">
                <span>+ AÃ±adir elemento</span>
              </div>
            </div>
          </div>

          <!-- LEGADO -->
          <div class="patrimonio-section legado">
            <div class="patrimonio-header">
              <div class="patrimonio-icon legado">ğŸ“œ</div>
              <div>
                <div class="patrimonio-title">Legado</div>
                <div class="patrimonio-subtitle">Lo emocional Â· Conocimientos, tradiciones, valores</div>
              </div>
            </div>
            <div class="patrimonio-list">
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ³</span>
                <span>Recetas de la abuela Carmen</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ„</span>
                <span>TradiciÃ³n Nochebuena</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ–ï¸</span>
                <span>Verano en el pueblo</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ“–</span>
                <span>Historia del bisabuelo</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸµ</span>
                <span>Canciones familiares</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸ’¬</span>
                <span>Dichos y frases</span>
              </div>
              <div class="patrimonio-item">
                <span class="patrimonio-item-icon">ğŸŒŸ</span>
                <span>Valores que nos definen</span>
              </div>
              <div class="patrimonio-item" style="background: var(--white); border: 1px dashed var(--text-muted); justify-content: center;">
                <span>+ AÃ±adir elemento</span>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- DIFERENCIA -->
      <div class="section">
        <h2 class="section-title">ğŸ¤” Â¿Ajuar o Legado?</h2>
        
        <table class="permisos-table">
          <thead>
            <tr>
              <th>CaracterÃ­stica</th>
              <th style="text-align: center;">ğŸ“¦ Ajuar</th>
              <th style="text-align: center;">ğŸ“œ Legado</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Naturaleza</td>
              <td style="text-align: center;">Material, tangible</td>
              <td style="text-align: center;">Emocional, intangible</td>
            </tr>
            <tr>
              <td>Ejemplos</td>
              <td style="text-align: center;">Casas, joyas, muebles, arte</td>
              <td style="text-align: center;">Recetas, tradiciones, historias</td>
            </tr>
            <tr>
              <td>Se puede...</td>
              <td style="text-align: center;">Vender, heredar, dividir</td>
              <td style="text-align: center;">Compartir, enseÃ±ar, recordar</td>
            </tr>
            <tr>
              <td>GestiÃ³n</td>
              <td style="text-align: center;">Inventario, documentos</td>
              <td style="text-align: center;">Archivo, multimedia</td>
            </tr>
            <tr>
              <td>Conflictos tÃ­picos</td>
              <td style="text-align: center;">Reparto, propiedad</td>
              <td style="text-align: center;">InterpretaciÃ³n, pÃ©rdida</td>
            </tr>
            <tr>
              <td>QuiÃ©n puede aÃ±adir</td>
              <td style="text-align: center;">Admins (configurable)</td>
              <td style="text-align: center;">Todos los miembros</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- DECISIONES -->
      <div class="section">
        <h2 class="section-title">âš–ï¸ MÃ³dulo Decisiones</h2>
        <p class="section-subtitle">Para temas que afectan a toda la familia</p>

        <div style="display: flex; flex-direction: column; gap: 12px;">
          <div style="padding: 16px; background: linear-gradient(90deg, #FEF3E2 0%, var(--secondary) 100%); border-radius: var(--radius-md); border-left: 4px solid var(--warning);">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div>
                <div style="font-weight: 700; margin-bottom: 4px;">ğŸ¡ Â¿QuÃ© hacemos con la casa del pueblo?</div>
                <div style="font-size: 0.8rem; color: var(--text-light);">Propuesta: Reformar para uso compartido</div>
              </div>
              <span style="padding: 4px 10px; background: var(--warning); color: white; font-size: 0.7rem; font-weight: 600; border-radius: var(--radius-sm);">En votaciÃ³n</span>
            </div>
            <div style="margin-top: 12px; display: flex; gap: 8px;">
              <span style="padding: 4px 10px; background: var(--success); color: white; font-size: 0.75rem; border-radius: var(--radius-sm);">4 a favor</span>
              <span style="padding: 4px 10px; background: var(--error); color: white; font-size: 0.75rem; border-radius: var(--radius-sm);">1 en contra</span>
              <span style="padding: 4px 10px; background: var(--text-muted); color: white; font-size: 0.75rem; border-radius: var(--radius-sm);">2 pendientes</span>
            </div>
          </div>

          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--success);">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div>
                <div style="font-weight: 700; margin-bottom: 4px;">ğŸ‚ CelebraciÃ³n 50 aniversario abuelos</div>
                <div style="font-size: 0.8rem; color: var(--text-light);">Fecha y lugar acordados</div>
              </div>
              <span style="padding: 4px 10px; background: var(--success); color: white; font-size: 0.7rem; font-weight: 600; border-radius: var(--radius-sm);">Decidido âœ“</span>
            </div>
          </div>

          <div style="padding: 16px; background: var(--secondary); border-radius: var(--radius-md); border-left: 4px solid var(--primary);">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div>
                <div style="font-weight: 700; margin-bottom: 4px;">ğŸ¤ Turnos cuidado abuelo Antonio</div>
                <div style="font-size: 0.8rem; color: var(--text-light);">Organizar rotaciones mensuales</div>
              </div>
              <span style="padding: 4px 10px; background: var(--primary); color: white; font-size: 0.7rem; font-weight: 600; border-radius: var(--radius-sm);">En discusiÃ³n</span>
            </div>
          </div>
        </div>
      </div>
    `
  };

  function showTab(tabName) {
    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
    event.currentTarget.classList.add('active');
    document.getElementById('content').innerHTML = tabs[tabName];
  }

  // Initialize
  document.getElementById('content').innerHTML = tabs.estructura;
</script>

</body>
</html>
